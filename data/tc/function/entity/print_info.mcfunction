# Executed by tc.body

scoreboard players add $found_count tc.tmp 1

# Tag attached entities
function tc:entity/tag_entities


## Get data
# Position (x, y, z)
execute store result score $pos_x tc.tmp run data get entity @s Pos[0] 1
execute store result score $pos_y tc.tmp run data get entity @s Pos[1] 1
scoreboard players add $pos_y tc.tmp 1
execute store result score $pos_z tc.tmp run data get entity @s Pos[2] 1

# Dimension (0: Unknown, 1: Overworld, 2: Nether, 3: The End)
execute if dimension minecraft:overworld run scoreboard players set $dimension tc.tmp 1
execute if dimension minecraft:the_nether run scoreboard players set $dimension tc.tmp 2
execute if dimension minecraft:the_end run scoreboard players set $dimension tc.tmp 3
execute unless score $dimension tc.tmp matches 0.. run scoreboard players set $dimension tc.tmp 0

# Status (0: Idle, 1: Running, 2: Paused)
execute if score @s tc.line matches 1.. if score @s tc.timer matches 0.. run scoreboard players set $status tc.tmp 1
execute if score @s tc.line matches 1.. if score @s tc.timer matches -1 run scoreboard players set $status tc.tmp 2
execute unless score $status tc.tmp matches 0.. run scoreboard players set $status tc.tmp 0



## Print line
execute if score $dimension tc.tmp matches 0 if score $status tc.tmp matches 0 run tellraw @a[limit=1,tag=tc.tmp_player] [{"text":"","hoverEvent":{"action":"show_text","contents":[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"tc.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"tc.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"tc.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"Unknown","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Idle - Owned by ","color":"gray"},{"entity":"@s","nbt":"ArmorItems[0].components.minecraft:custom_data.tc.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension tc.tmp matches 1 if score $status tc.tmp matches 0 run tellraw @a[limit=1,tag=tc.tmp_player] [{"text":"","hoverEvent":{"action":"show_text","contents":[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"tc.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"tc.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"tc.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"Overworld","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Idle - Owned by ","color":"gray"},{"entity":"@s","nbt":"ArmorItems[0].components.minecraft:custom_data.tc.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension tc.tmp matches 2 if score $status tc.tmp matches 0 run tellraw @a[limit=1,tag=tc.tmp_player] [{"text":"","hoverEvent":{"action":"show_text","contents":[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"tc.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"tc.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"tc.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"The Nether","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Idle - Owned by ","color":"gray"},{"entity":"@s","nbt":"ArmorItems[0].components.minecraft:custom_data.tc.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension tc.tmp matches 3 if score $status tc.tmp matches 0 run tellraw @a[limit=1,tag=tc.tmp_player] [{"text":"","hoverEvent":{"action":"show_text","contents":[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"tc.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"tc.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"tc.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"The End","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Idle - Owned by ","color":"gray"},{"entity":"@s","nbt":"ArmorItems[0].components.minecraft:custom_data.tc.Owner.Name","interpret":true,"color":"gray"}]

execute if score $dimension tc.tmp matches 0 if score $status tc.tmp matches 1 run tellraw @a[limit=1,tag=tc.tmp_player] [{"text":"","hoverEvent":{"action":"show_text","contents":[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"tc.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"tc.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"tc.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"Unknown","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Running - Owned by ","color":"gray"},{"entity":"@s","nbt":"ArmorItems[0].components.minecraft:custom_data.tc.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension tc.tmp matches 1 if score $status tc.tmp matches 1 run tellraw @a[limit=1,tag=tc.tmp_player] [{"text":"","hoverEvent":{"action":"show_text","contents":[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"tc.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"tc.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"tc.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"Overworld","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Running - Owned by ","color":"gray"},{"entity":"@s","nbt":"ArmorItems[0].components.minecraft:custom_data.tc.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension tc.tmp matches 2 if score $status tc.tmp matches 1 run tellraw @a[limit=1,tag=tc.tmp_player] [{"text":"","hoverEvent":{"action":"show_text","contents":[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"tc.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"tc.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"tc.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"The Nether","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Running - Owned by ","color":"gray"},{"entity":"@s","nbt":"ArmorItems[0].components.minecraft:custom_data.tc.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension tc.tmp matches 3 if score $status tc.tmp matches 1 run tellraw @a[limit=1,tag=tc.tmp_player] [{"text":"","hoverEvent":{"action":"show_text","contents":[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"tc.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"tc.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"tc.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"The End","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Running - Owned by ","color":"gray"},{"entity":"@s","nbt":"ArmorItems[0].components.minecraft:custom_data.tc.Owner.Name","interpret":true,"color":"gray"}]

execute if score $dimension tc.tmp matches 0 if score $status tc.tmp matches 2 run tellraw @a[limit=1,tag=tc.tmp_player] [{"text":"","hoverEvent":{"action":"show_text","contents":[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"tc.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"tc.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"tc.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"Unknown","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Paused - Owned by ","color":"gray"},{"entity":"@s","nbt":"ArmorItems[0].components.minecraft:custom_data.tc.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension tc.tmp matches 1 if score $status tc.tmp matches 2 run tellraw @a[limit=1,tag=tc.tmp_player] [{"text":"","hoverEvent":{"action":"show_text","contents":[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"tc.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"tc.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"tc.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"Overworld","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Paused - Owned by ","color":"gray"},{"entity":"@s","nbt":"ArmorItems[0].components.minecraft:custom_data.tc.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension tc.tmp matches 2 if score $status tc.tmp matches 2 run tellraw @a[limit=1,tag=tc.tmp_player] [{"text":"","hoverEvent":{"action":"show_text","contents":[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"tc.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"tc.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"tc.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"The Nether","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Paused - Owned by ","color":"gray"},{"entity":"@s","nbt":"ArmorItems[0].components.minecraft:custom_data.tc.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension tc.tmp matches 3 if score $status tc.tmp matches 2 run tellraw @a[limit=1,tag=tc.tmp_player] [{"text":"","hoverEvent":{"action":"show_text","contents":[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"tc.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"tc.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"tc.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"tc.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"The End","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Paused - Owned by ","color":"gray"},{"entity":"@s","nbt":"ArmorItems[0].components.minecraft:custom_data.tc.Owner.Name","interpret":true,"color":"gray"}]


# Clear tmp
tag @e[type=#tc:turtle_parts,tag=tc.turtle] remove tc.tmp
scoreboard players reset $pos_x tc.tmp
scoreboard players reset $pos_y tc.tmp
scoreboard players reset $pos_z tc.tmp
scoreboard players reset $dimension tc.tmp
scoreboard players reset $status tc.tmp

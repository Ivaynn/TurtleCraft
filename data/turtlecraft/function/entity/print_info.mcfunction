# Executed by turtlecraft.body

scoreboard players add $found_count turtlecraft.tmp 1

# Tag attached entities
function turtlecraft:entity/tag_entities


## Get data
# Position (x, y, z)
execute store result score $pos_x turtlecraft.tmp run data get entity @s Pos[0] 1
execute store result score $pos_y turtlecraft.tmp run data get entity @s Pos[1] 1
scoreboard players add $pos_y turtlecraft.tmp 1
execute store result score $pos_z turtlecraft.tmp run data get entity @s Pos[2] 1

# Dimension (0: Unknown, 1: Overworld, 2: Nether, 3: The End)
execute if dimension minecraft:overworld run scoreboard players set $dimension turtlecraft.tmp 1
execute if dimension minecraft:the_nether run scoreboard players set $dimension turtlecraft.tmp 2
execute if dimension minecraft:the_end run scoreboard players set $dimension turtlecraft.tmp 3
execute unless score $dimension turtlecraft.tmp matches 0.. run scoreboard players set $dimension turtlecraft.tmp 0

# Status (0: Idle, 1: Running, 2: Paused)
execute if score @s turtlecraft.line matches 1.. if score @s turtlecraft.timer matches 0.. run scoreboard players set $status turtlecraft.tmp 1
execute if score @s turtlecraft.line matches 1.. if score @s turtlecraft.timer matches -1 run scoreboard players set $status turtlecraft.tmp 2
execute unless score $status turtlecraft.tmp matches 0.. run scoreboard players set $status turtlecraft.tmp 0



## Print line
execute if score $dimension turtlecraft.tmp matches 0 if score $status turtlecraft.tmp matches 0 run tellraw @a[limit=1,tag=turtlecraft.tmp_player] [{"text":"","hover_event":{action:"show_text",value:[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"turtlecraft.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"Unknown","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Idle - Owned by ","color":"gray"},{"entity":"@s","nbt":"equipment.feet.components.minecraft:custom_data.turtlecraft.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension turtlecraft.tmp matches 1 if score $status turtlecraft.tmp matches 0 run tellraw @a[limit=1,tag=turtlecraft.tmp_player] [{"text":"","hover_event":{action:"show_text",value:[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"turtlecraft.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"Overworld","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Idle - Owned by ","color":"gray"},{"entity":"@s","nbt":"equipment.feet.components.minecraft:custom_data.turtlecraft.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension turtlecraft.tmp matches 2 if score $status turtlecraft.tmp matches 0 run tellraw @a[limit=1,tag=turtlecraft.tmp_player] [{"text":"","hover_event":{action:"show_text",value:[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"turtlecraft.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"The Nether","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Idle - Owned by ","color":"gray"},{"entity":"@s","nbt":"equipment.feet.components.minecraft:custom_data.turtlecraft.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension turtlecraft.tmp matches 3 if score $status turtlecraft.tmp matches 0 run tellraw @a[limit=1,tag=turtlecraft.tmp_player] [{"text":"","hover_event":{action:"show_text",value:[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"turtlecraft.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"The End","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Idle - Owned by ","color":"gray"},{"entity":"@s","nbt":"equipment.feet.components.minecraft:custom_data.turtlecraft.Owner.Name","interpret":true,"color":"gray"}]

execute if score $dimension turtlecraft.tmp matches 0 if score $status turtlecraft.tmp matches 1 run tellraw @a[limit=1,tag=turtlecraft.tmp_player] [{"text":"","hover_event":{action:"show_text",value:[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"turtlecraft.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"Unknown","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Running - Owned by ","color":"gray"},{"entity":"@s","nbt":"equipment.feet.components.minecraft:custom_data.turtlecraft.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension turtlecraft.tmp matches 1 if score $status turtlecraft.tmp matches 1 run tellraw @a[limit=1,tag=turtlecraft.tmp_player] [{"text":"","hover_event":{action:"show_text",value:[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"turtlecraft.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"Overworld","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Running - Owned by ","color":"gray"},{"entity":"@s","nbt":"equipment.feet.components.minecraft:custom_data.turtlecraft.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension turtlecraft.tmp matches 2 if score $status turtlecraft.tmp matches 1 run tellraw @a[limit=1,tag=turtlecraft.tmp_player] [{"text":"","hover_event":{action:"show_text",value:[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"turtlecraft.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"The Nether","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Running - Owned by ","color":"gray"},{"entity":"@s","nbt":"equipment.feet.components.minecraft:custom_data.turtlecraft.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension turtlecraft.tmp matches 3 if score $status turtlecraft.tmp matches 1 run tellraw @a[limit=1,tag=turtlecraft.tmp_player] [{"text":"","hover_event":{action:"show_text",value:[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"turtlecraft.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"The End","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Running - Owned by ","color":"gray"},{"entity":"@s","nbt":"equipment.feet.components.minecraft:custom_data.turtlecraft.Owner.Name","interpret":true,"color":"gray"}]

execute if score $dimension turtlecraft.tmp matches 0 if score $status turtlecraft.tmp matches 2 run tellraw @a[limit=1,tag=turtlecraft.tmp_player] [{"text":"","hover_event":{action:"show_text",value:[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"turtlecraft.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"Unknown","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Paused - Owned by ","color":"gray"},{"entity":"@s","nbt":"equipment.feet.components.minecraft:custom_data.turtlecraft.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension turtlecraft.tmp matches 1 if score $status turtlecraft.tmp matches 2 run tellraw @a[limit=1,tag=turtlecraft.tmp_player] [{"text":"","hover_event":{action:"show_text",value:[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"turtlecraft.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"Overworld","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Paused - Owned by ","color":"gray"},{"entity":"@s","nbt":"equipment.feet.components.minecraft:custom_data.turtlecraft.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension turtlecraft.tmp matches 2 if score $status turtlecraft.tmp matches 2 run tellraw @a[limit=1,tag=turtlecraft.tmp_player] [{"text":"","hover_event":{action:"show_text",value:[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"turtlecraft.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"The Nether","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Paused - Owned by ","color":"gray"},{"entity":"@s","nbt":"equipment.feet.components.minecraft:custom_data.turtlecraft.Owner.Name","interpret":true,"color":"gray"}]
execute if score $dimension turtlecraft.tmp matches 3 if score $status turtlecraft.tmp matches 2 run tellraw @a[limit=1,tag=turtlecraft.tmp_player] [{"text":"","hover_event":{action:"show_text",value:[{"text":"Fuel: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.fuel"},"color":"white"},{"text":"\nID: ","color":"gray"},{"score":{"name":"@s","objective":"turtlecraft.id"},"color":"white"},{"text":"\nPos: ","color":"gray"},{"score":{"name":"$pos_x","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_y","objective":"turtlecraft.tmp"},"color":"white"},{"text":" / ","color":"gray"},{"score":{"name":"$pos_z","objective":"turtlecraft.tmp"},"color":"white"},{"text":"\nDimension: ","color":"gray"},{"text":"The End","color":"white"}]}},{"entity":"@s","nbt":"CustomName","interpret":true,"color":"gray"},{"text":" - Paused - Owned by ","color":"gray"},{"entity":"@s","nbt":"equipment.feet.components.minecraft:custom_data.turtlecraft.Owner.Name","interpret":true,"color":"gray"}]


# Clear tmp
tag @e[type=#turtlecraft:turtle_parts,tag=turtlecraft.turtle] remove turtlecraft.tmp
scoreboard players reset $pos_x turtlecraft.tmp
scoreboard players reset $pos_y turtlecraft.tmp
scoreboard players reset $pos_z turtlecraft.tmp
scoreboard players reset $dimension turtlecraft.tmp
scoreboard players reset $status turtlecraft.tmp
